package net.foxycorndog.p1xelandroid;

import javax.microedition.khronos.egl.EGLConfig;
import javax.microedition.khronos.opengles.GL10;
import javax.microedition.khronos.opengles.GL11;

import net.foxycorndog.jdooglandroid.GL;
import net.foxycorndog.jdooglandroid.components.Frame;
import net.foxycorndog.jdooglandroid.components.Frame.GameRenderer;
import net.foxycorndog.jdooglandroid.image.imagemap.SpriteSheet;
import net.foxycorndog.jdooglandroid.input.TouchInput;
import net.foxycorndog.p1xelandroid.items.tiles.Tile;
import android.app.Activity;
import android.opengl.GLSurfaceView;
import android.os.Bundle;
import android.util.Log;
import android.view.Window;

public class MainActivity extends Activity
{
	private GLSurfaceView   mGLView;
	
	private Activity        activity;
	
	private static P1xeland p;
	
	
	public void onCreate(Bundle savedInstanceState)
	{
		super.onCreate(savedInstanceState);
		
		this.activity = this;
				
		p = new P1xeland();
		
		p.setActivity(this);
		
		GameRenderer renderer = new GameRenderer()
		{
			public void render(GL10 gl)
			{
				p.render();
			}
			
			public void loop(GL10 gl)
			{
				p.loop();
			}

			public void onSurfaceChanged(GL10 gl)
			{
				Frame.init(P1xeland.GAME_TITLE, this, activity);
				
				Tile.init(activity.getResources());
				
				p.init();
			}

			public void onSurfaceCreated(GL10 gl, EGLConfig config)
			{
				gl.glClearColor(0.5f, 0.5f, 0.5f, 1.0f);
			}
		};
		
		mGLView = new GLSurfaceView(this);
        mGLView.setRenderer(renderer);
		mGLView.setOnTouchListener(TouchInput.getTouchListener());
//		mGLView.
		
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        
        setContentView(mGLView);
		
//		p.start();
	}
}