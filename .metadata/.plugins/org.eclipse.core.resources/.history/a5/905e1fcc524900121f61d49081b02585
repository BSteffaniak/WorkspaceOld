package net.foxycorndog.glshaderide.language.java;

import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLClassLoader;

public class Java
{
	public void run(String fileLocation, ConsoleStream stream)
	{
		try
		{
			URL url = new URL("file://" + fileLocation);
			
			ClassLoader cLoader = new URLClassLoader(new URL[] { url });
			
			Class clazz = cLoader.loadClass("Test");
			
			Method m = clazz.getMethod("main", String[].class);
			
			m.invoke(null, new String[] { null });
		}
		catch (IllegalAccessException e)
		{
			e.printStackTrace();
		}
		catch (InvocationTargetException e)
		{
			e.printStackTrace();
		}
		catch (NoSuchMethodException e)
		{
			e.printStackTrace();
		}
		catch (ClassNotFoundException e)
		{
			e.printStackTrace();
		}
		catch (MalformedURLException e)
		{
			e.printStackTrace();
		}
		catch (Exception e)
		{
			stream.println(e.getMessage());
		}
	}
}